<div class="row">
  <!-- *ngIf="isPdfModel" -->
  <!-- <div class="col-md-12 breadcumb-box">
    <div class="breadcumb-text">
      <span class="breadcumb-quote" [routerLink]="['/qms/myquotes']">My Quotes</span><span class="breadcumb-invoice"> /
        {{invoiceId}} </span>
    </div>
  </div> -->
  <div class="col-md-12">
    <div class="background-white">
      <div style="background-color: #fff;">
        <div class="back-section" >
          <span (click)="goBack()">
            <i class="fa fa-arrow-left" aria-hidden="true"></i> Go Back
          </span>
          <!-- <span>&nbsp;&nbsp;|&nbsp;&nbsp;</span> -->
          <span (click)="generateInvoicePDF()" class="form-button"> {{pdfButtonTitle}} </span> </div>

        <!-- {{invoiceDetails | json}} -->
          <!-- {{specialFeeDetails | json }} -->

        <div id="contentToConvertPDF" style="margin: 0px 10px; font-family: Poppins, sans-serif;">
          <table style="padding: 15px 30px;width:100%;">
            <tr>
              <td>
                <table style="width:100%;margin-top: 10px;">
                  <tr>
                    <td style="width:70px;">
                      <!-- <img [src]="(iContactViewModel.contactPictureFile) ? iContactViewModel.contactPictureFile : defaultUrl "
                  onError="this.src='assets/company/avatar-manu-basic.svg'" style="width: 65px;height: 65px;border:2px solid #e2e2e5;border-radius:3px;"> -->
                      <img
                        src="https://s3.us-east-2.amazonaws.com/mfg.mp2020/logos/636936145894211896_S3_avatarmanubasic.svg"
                        style="display: none; width: 65px;height: 65px;border:2px solid #e2e2e5;border-radius:3px;">
                      <!-- <span style="font-size:24px;font-weight:bold;margin-left:15px;display:inline;">Quick Parts, LTD.</span> -->
                    </td>
                    <td>
                      <span style="font-size:24px;font-weight:bold;margin-left:15px;">{{companyname}}</span>
                    </td>
                    <td style="text-align:right;">
                      <span style="font-size: 50px;color: #919aa3;">Invoice</span>
                    </td>
                  </tr>
                </table>
                <table style="width: 100%;margin-top: 15px;">
                  <tbody>
                    <tr>
                      <td style="width: 28%;vertical-align:top;text-align: left;">
                        <span style="white-space: normal;font-size: 18px;font-weight: bold;">Bill to </span>
                        <p  style="white-space: normal;font-size: 14px;text-align: left;">
                                <app-qmscontact-info-viewer [(contactId)]="invoiceDetails.customerId"
                                                    (companyName)="companyname"></app-qmscontact-info-viewer>
                        </p>
                      </td>
                      <td style="width: 3%;vertical-align:top;">
                        &nbsp;
                      </td>
                      <td style="width: 28%;vertical-align:top">

                        <!-- <span style="white-space: normal;font-size: 18px;font-weight: bold;">Ship to </span>
                        <p style="white-space: normal;font-size: 14px;">
                          ABC Street<br>
                          Vihan Systems, Inc. -<br>
                          Engineering Center (ABC)<br>
                          1234 Industrial Ave<br>
                          Building #2A<br>
                          Testing, AB 12345 USA<br>
                        </p> -->
                      </td>
                      <td style="width: 3%;vertical-align:top;">&nbsp;</td>
                      <td style="width: 38%;vertical-align:top;" align="right">
                        <table style="border:1px solid #e2e2e5;width:90%;border-collapse: collapse;" cellpadding="5">
                          <tr style="background-color: #f6f7fb;">
                            <td>&nbsp;</td>
                            <td>
                                <strong>
                                    <span style="font-family:Poppins,sans-serif;">
                                        Date:
                                    </span>
                                </strong>
                            </td>
                            <td>
                                <span style="font-family:Poppins,sans-serif;">
                                    {{invoiceDetails.issueDate | date:'MM/dd/y' }}
                                </span>
                            </td>
                            <td>&nbsp;</td>
                          </tr>
                          <tr>
                            <td>&nbsp;</td>
                            <td><strong>
                                <span style="font-family:Poppins,sans-serif;">
                                    Invoice #:
                                </span>
                            </strong></td>
                            <td>
                                <span style="font-family:Poppins,sans-serif;">
                                    {{invoiceDetails.invoiceNumber}}
                                </span>
                            </td>
                            <td>&nbsp;</td>
                          </tr>
                          <tr style="background-color: #f6f7fb;">
                            <td>&nbsp;</td>
                            <td>
                                <strong>
                                    <span style="font-family:Poppins,sans-serif;">
                                        Customer ID:
                                    </span>
                                </strong>
                            </td>
                            <td>
                                <span style="font-family:Poppins,sans-serif;">
                                    {{invoiceDetails.customerId}}
                                </span>
                            </td>
                            <td>&nbsp;</td>
                          </tr>
                          <tr>
                            <td>&nbsp;</td>
                            <td>
                                <strong>
                                    <span style="font-family:Poppins,sans-serif;">
                                        Purchase Order#:
                                    </span>
                                </strong>
                            </td>
                            <td>
                                <span style="font-family:Poppins,sans-serif;">
                                    {{ invoiceDetails.ordernumber}}
                                </span>
                            </td>
                            <td>&nbsp;</td>
                          </tr>
                          <tr style="background-color: #f6f7fb;">
                            <td>&nbsp;</td>
                            <td>
                                <strong>
                                    <span style="font-family:Poppins,sans-serif;">Quote #</span>
                                </strong>
                            </td>
                            <td>
                                <span style="font-family:Poppins,sans-serif;">
                                    {{invoiceDetails.quoteReferenceNo}}
                                </span>
                            </td>
                            <td>&nbsp;</td>
                          </tr>
                          <!-- <tr>
                            <td>&nbsp;</td>
                            <td><strong>Payment Due By:</strong></td>
                            <td>November 22, 2019</td>
                            <td>&nbsp;</td>
                          </tr> -->
                        </table>
                      </td>
                    </tr>
                  </tbody>
                </table>

                <!-- <hr style="border: 1px solid #222222;margin:20px 0px 20px;"/> -->
                <!-- {{invoiceDetails | json}} -->
                <p class="nomargin" style="font-size: 20px; margin-bottom: 0px; margin-top: 15px 5px; font-family:Poppins,sans-serif;"> <strong>  Quote Information</strong></p>
                <hr style="border: 1px solid #222222;margin:20px 0px 20px;" />

                <!-- {{invoiceDetails.invoiceItems | json}} -->
                <div *ngIf="invoiceDetails !=undefined">
                <div class="part-container"
                     *ngFor="let itemInfo of invoiceDetails.invoiceItems">

                    <table style="width: 100%;">
                        <tbody>
                            <tr>
                                <td style="width: 30%; vertical-align: top;">
                                    <span style="font-family:Poppins,sans-serif;">
                                        <b>{{itemInfo.partName}}</b>
                                        <br>
                                        {{itemInfo.partNumber}}
                                    </span>
                                </td>
                                <!-- <td style="width:70%; vertical-align: top;">
                                    <table style="width: 100%;">
                                        <thead>
                                            <tr>
                                                <td style="width: 20%"
                                                 *ngFor="let qtyInfo of itemInfo.partDetails.partQuantities">
                                                    {{qtyInfo.quantity}} {{qtyInfo.selectedUnitname}}
                                                </td>
                                            </tr>
                                            <tr>

                                            </tr>
                                        </thead>
                                    </table>
                                </td> -->
                                <!-- {{itemInfo | json}}-->
                                <td style="width: 70%;" *ngIf="itemInfo !=null &&  itemInfo.partDetails!=null && itemInfo.partDetails.partQuantities != null && itemInfo.partDetails.partQuantities != undefined && itemInfo.partDetails.partQuantities.length!=0">
                                    <div style="width: 100%;"
                                         *ngFor="let qtyInfo of itemInfo.partDetails.partQuantities; let idx = index">
                                      <div *ngIf="qtyInfo.quantity != null && qtyInfo.quantity != undefined && qtyInfo.quantity != '' && qtyInfo.quantity !=0">

                                         <table  style="border: solid 0px red;width: 100%;">
                                             <tr>
                                                 <td rowspan="10" style="vertical-align: top; width: 33.33%; ">
                                                    <span style=" font-family:Poppins,sans-serif;">
                                                        {{qtyInfo.quantity}} {{qtyInfo.selectedUnitName}}
                                                    </span>
                                                </td>
                                             </tr>
                                             <tr *ngFor="let fee of qtyInfo.feeTypeList">
                                                <td  style="text-align: right; width: 33.33%;">
                                                    <!-- --{{ fee | json }} -->
                                                    <!-- {{fee.selectedFeeTypeId}} -->
                                                    <span style=" font-family:Poppins,sans-serif;">
                                                     {{fee.feeTypeName}}
                                                    </span>
                                                </td>
                                                <td style="text-align: right; width: 33.33%;">
                                                    <span style=" font-family:Poppins,sans-serif;">
                                                        ${{getValue(fee.feeTypeCost)}}
                                                    </span>
                                                </td>
                                             </tr>
                                        </table>
                                        <hr *ngIf="idx!=itemInfo.partDetails.partQuantities.length-1" style="border: 0px; border-top: solid 1px silver; padding: 0px;">
                                      </div>
                                        <!-- <div class="col-sm-5 col-md-5 col-lg-5">
                                            {{qtyInfo.quantity}} {{qtyInfo.selectedUnitname}}
                                        </div>
                                        <div class="col-sm-7 col-md-7 col-lg-7">
                                            <div class="col-sm-12 col-md-12 col-lg-12" *ngFor="let fee of qtyInfo.fees">
                                                <div class="col-sm-6 col-md-6 col-lg-6">

                                                </div>
                                                <div class="col-sm-6 col-md-6 col-lg-6">
                                                    {{fee.amount}}
                                                </div>
                                            </div>
                                        </div> -->
                                        <!-- <div class="col-sm-6 col-md-6 col-lg-6 pull-right">
                                            {{qtyInfo.quantity}}
                                        </div> -->
                                    </div>
                                    <div style="width: 100%;" *ngIf="itemInfo.partDetails.specialFee != null && itemInfo.partDetails.specialFee != undefined && itemInfo.partDetails.specialFee.feeTypeArray != undefined && itemInfo.partDetails.specialFee.feeTypeArray.length != 0">
                                      <!-- {{itemInfo.partDetails.specialFee| json }} -->
                                      <hr style="border: 0px; border-top: solid 1px silver; padding: 0px;">
                                      <table  style="border: solid 0px red;width: 100%;">
                                        <tr>
                                            <td rowspan="10" style="vertical-align: top; width: 33.33%; ">
                                               <span style=" font-family:Poppins,sans-serif;">
                                                Special Fee
                                               </span>
                                           </td>
                                        </tr>
                                        <tr *ngFor="let specialFee of itemInfo.partDetails.specialFee.feeTypeArray; let idx = index">
                                           <td  style="text-align: right; width: 33.33%;">
                                               <!-- {{specialFee | json }} -->
                                               <span style=" font-family:Poppins,sans-serif;">
                                                   {{specialFee.feeName }}
                                               </span>
                                           </td>
                                           <td style="text-align: right; width: 33.33%;">
                                               <span style=" font-family:Poppins,sans-serif;">
                                                   ${{getValue(specialFee.cost)}}
                                               </span>
                                           </td>
                                        </tr>
                                   </table>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <hr/>
                    <div style="width: 100%; text-align: right; font-weight: bold; font-size: 12pt;">
                        <span style="font-family:Poppins,sans-serif; font-size: 12pt;">
                            Sub Total : ${{getValue(calculateSubTotalAmount(itemInfo))}}
                        </span>
                    </div>
                </div>
              </div>
                <br><br>
                <table style="width:100%;">
                    <tr>
                      <td style="width:40%;vertical-align:top;white-space: normal">
                        <p style="font-size:18px;font-weight:bold;margin-top:25px; font-family:Poppins,sans-serif;">
                            Notes
                        </p>
                       <p style="font-family:Poppins,sans-serif;" [innerHTML]="invoiceDetails.notes"></p>
                      </td>
                      <td style="width:30%;vertical-align:top; font-family:Poppins,sans-serif;">
                        <div style="border:0px solid #e2e2e5;
                        padding: 2px 0px 2px 10px;
                        border-top:2px solid #222;
                        margin-top:25px;
                        font-size: 15pt;">
                          <strong>Grand Total</strong>
                          <span style="float: right;font-weight:bold;margin-right:5px;">${{getValue(calculateGrandTotal())}}</span></div>
                      </td>
                    </tr>
                  </table>

                <!-- <div style="border: 1px solid #e2e2e5;margin-top:15px;" *ngFor="let part of invoiceDetails.partInfo; let i = index">
                  <table style="height: 187px; width: 100%;border-collapse: collapse;margin-top:15px;">
                    <tbody>
                      <tr style="height: 18px;">
                        <td style="width:2%;">&nbsp;</td>
                        <td style="width: 26%; height: 18px;font-weight: bold;">{{ part.partName }}</td>
                        <td style="width: 14%; height: 18px;">&nbsp;</td>
                        <td style="width: 14%; height: 18px;">&nbsp;</td>
                        <td style="width: 14%; height: 18px;">&nbsp;</td>
                        <td style="width: 14%; height: 18px;">&nbsp;</td>
                        <td style="width: 14%; height: 18px;">&nbsp;</td>
                        <td style="width:2%;">&nbsp;</td>
                      </tr>
                      <tr style="height: 18px;">
                        <td style="width:2%;">&nbsp;</td>
                        <td style="width: 26%; height: 18px;">{{ part.partNo }}</td>
                        <td style="width: 14%; height: 18px;">&nbsp;</td>
                        <td style="width: 14%; height: 18px;">&nbsp;</td>
                        <td style="width: 14%; height: 18px;">&nbsp;</td>
                        <td style="width: 14%; height: 18px;">&nbsp;</td>
                        <td style="width: 14%; height: 18px;">&nbsp;</td>
                        <td style="width:2%;">&nbsp;</td>
                      </tr>

                      <tr style="height: 20px;"></tr>
                      <tr style="height: 18px;">
                        <td style="width:2%;">&nbsp;</td>
                        <td style="width: 26%; height: 18px;">&nbsp;</td>

                        <td style="width: 14%; height: 18px;text-align: right;">{{ getPieces(4,part.qtyInfo) }}</td>
                        <td style="width: 14%; height: 18px;text-align: right;">{{ getPieces(3,part.qtyInfo) }}</td>
                        <td style="width: 14%; height: 18px;text-align: right;">{{ getPieces(2,part.qtyInfo) }}</td>
                        <td style="width: 14%; height: 18px;text-align: right;">{{ getPieces(1,part.qtyInfo) }}</td>
                        <td style="width: 14%; height: 18px;text-align: right;">{{ getPieces(0,part.qtyInfo) }}</td>
                        <td style="width:2%;">&nbsp;</td>
                      </tr>
                      <tr style="background-color: #f6f7fb;height: 19px;border-left: 1px solid e2e2e5;border-right: 1px solid e2e2e5;" *ngFor="let fee of feeTypeArray[i]">
                        <td style="width:2%;">&nbsp;</td>
                        <td style="width: 26%; height: 19px;">
                          {{ fee }}
                        </td>
                        <td style="width: 14%; height: 19px;text-align: right;"> {{ getFeeAmount(fee, part.qtyInfo, 4 )}}</td>
                        <td style="width: 14%; height: 19px;text-align: right;"> {{ getFeeAmount( fee, part.qtyInfo, 3 )}}</td>
                        <td style="width: 14%; height: 19px;text-align: right;"> {{ getFeeAmount(fee, part.qtyInfo, 2 )}}</td>
                        <td style="width: 14%; height: 19px;text-align: right;"> {{ getFeeAmount(fee, part.qtyInfo, 1 )}}</td>
                        <td style="width: 14%; height: 19px;text-align: right;"> {{ getFeeAmount(fee, part.qtyInfo, 0 )}}</td>
                        <td style="width:2%;">&nbsp;</td>
                      </tr>
                      <tr
                        style="background-color: #f6f7fb;height: 19px;border-left: 1px solid e2e2e5;border-right: 1px solid e2e2e5;">
                        <td style="width:2%;">&nbsp;</td>
                        <td style="width: 26%; height: 18px;font-weight: bold;">Subtotals</td>
                        <td style="width: 14%; height: 18px;font-weight: bold;text-align: right;">{{ getSubTotal(4, part.qtyInfo)}} </td>
                        <td style="width: 14%; height: 18px;font-weight: bold;text-align: right;">{{ getSubTotal(3, part.qtyInfo)}} </td>
                        <td style="width: 14%; height: 18px;font-weight: bold;text-align: right;">{{ getSubTotal(2, part.qtyInfo)}} </td>
                        <td style="width: 14%; height: 18px;font-weight: bold;text-align: right;"> {{ getSubTotal(1, part.qtyInfo)}}</td>
                        <td style="width: 14%; height: 18px;font-weight: bold;text-align: right;"> {{ getSubTotal(0, part.qtyInfo)}}</td>
                        <td style="width:2%;">&nbsp;</td>
                      </tr>
                      <tr style="height: 19px;border-left: 1px solid e2e2e5;border-right: 1px solid e2e2e5;">
                        <td style="width:2%;">&nbsp;</td>
                        <td style="width: 26%; height: 18px;font-weight: bold;">Total</td>
                        <td style="width: 14%; height: 18px;font-weight: bold;text-align: right;">&nbsp; </td>
                        <td style="width: 14%; height: 18px;font-weight: bold;text-align: right;">&nbsp;</td>
                        <td style="width: 14%; height: 18px;font-weight: bold;text-align: right;">&nbsp; </td>
                        <td style="width: 14%; height: 18px;font-weight: bold;text-align: right;"> &nbsp;</td>
                        <td style="width: 14%; height: 18px;font-weight: bold;text-align: right;"> $ {{subtotalArray[i]}}</td>
                        <td style="width:2%;">&nbsp;</td>
                      </tr>
                      <tr style="height: 10px;"></tr>
                    </tbody>
                  </table>
                </div> -->



                <!-- <hr style="border: 1px solid #222222;margin:20px 0px 20px;" />                -->

                <!-- <hr style="border: 1px solid #222222;margin:20px 0px 20px;" /> -->
                <!-- <p style="word-break: break-all;"> Thank you for your business. Make all checks payable to <strong>Quick
                    Parts, LTD.</strong></p>
                <span>If you have any questions, please contact:</span><br />
                <strong>Project Manager</strong><br />
                <p>
                  Daniel Clower<br />
                  dclower@quickparts.com<br />
                  770-901-2365 ext. 123
                </p> -->
                <hr style="border: 1px solid #222222;margin:20px 0px 20px;" />
                <p style="font-size: 16px;font-weight:bold;">{{ companyDetails.company.name}}</p>
                <table width="100%">
                  <tbody>
                    <tr>
                      <td style="width: 25%;vertical-align:top;">
                        <!-- {{companyDetails.address.streetAddress}}<br />
                        {{companyDetails.address.deptAddress}}<br />
                        {{companyDetails.address.city}}, {{companyDetails.address.state}} {{companyDetails.address.postalCode}}<br />
                        {{companyDetails.address.country}} -->
                        <div [innerHTML]="getAddressFormat(companyDetails.address)"></div>

                      </td>
                      <td style="width: 5%;">&nbsp;</td>
                      <td style="width:25%;vertical-align:top;">
                        Phone: {{companyDetails.phoneNo}}<br />
                        <!-- Fax: 770-901-3232<br /> -->
                        {{companyDetails.website }}
                      </td>
                      <td style="width: 5%;">&nbsp;</td>
                      <td style="width: 60%;">&nbsp;</td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
