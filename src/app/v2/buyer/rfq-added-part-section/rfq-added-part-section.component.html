<div *ngIf="!showAddedSection" class="rightAccordion">
    <h4>Part Library<img src="assets/rfq/close-3.svg" class="pull-right" (click)="closePartDetails()"></h4>
    <div>Add parts from your library to your RFQ.</div>
    <form>
        <div class="row">
            <div class="col-md-12">
                <div class="part-serach-box">
                    <i class="fa fa-search icon-search" (click)="onSearchChange()" placement="top" container="body"
                        ngbTooltip="Search"></i>
                    <input type="text" placeholder="Search" class="form-control Search-Box search-text"
                        name="partDrawer" [(ngModel)]="partDrawerSearch" (keypress)="searchByKey($event)"
                        (input)="onSearchChange()" />
                    <i class="fa fa-times-circle icon" (click)="removeTextValuePart()" placement="top" container="body"
                        ngbTooltip="Remove Text" style="top: 11px; right: 17px"></i>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div *ngFor="let part of partLibraryList">
                    <div class="row">
                        <div class="col-md-3 cursor-pointer" (click)="showHideRFQPartDrawerDetails(part)">
                            <img [src]="getImageForPart(part?.PartLibraryModel)" style="width: 50px; height: 50px" />
                        </div>
                        <div class="col-md-6 cursor-pointer" (click)="showHideRFQPartDrawerDetails(part)">
                            <span class="Part-Name pointerCursor">{{
                                part?.PartLibraryModel?.partName
                                }}</span>
                            <br />
                            <span class="Part-Number">{{
                                part?.PartLibraryModel?.partNumber
                                }}</span>
                        </div>
                        <div class="col-md-1 cursor-pointer" (click)="showHideRFQPartDrawerDetails(part)">
                            <div style="color: #2E58D6">
                                <i *ngIf="part.ShowDetials" class="fa fa-caret-down"></i>
                                <i *ngIf="!part.ShowDetials" class="fa fa-caret-right"></i>
                            </div>
                        </div>
                        <div class="col-md-1 cursor-pointer" (click)="addPartToRFQ(part?.PartLibraryModel)">Add</div>
                    </div>
                    <div *ngIf="part.ShowDetials">
                        <div class="row">
                            <div class="col-md-6 fw-bold">Manufacturing Process</div>
                            <div class="col-md-6">{{getText(part,'parentCategoryName')}}</div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 fw-bold">Technique</div>
                            <div class="col-md-6">{{getText(part,'childCategoryName')}}</div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 fw-bold">Material</div>
                            <div class="col-md-6">{{getText(part,'materialName')}}</div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 fw-bold">Post Processing</div>
                            <div class="col-md-6">{{getText(part,'postProductionProcessName')}}</div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 fw-bold">Quantity Unit</div>
                            <div class="col-md-6"> {{getText(part,'partQtyUnitName')}}</div>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="partLibraryList?.length <= 0">
                <div class="row">
                    <div class="col-md-12">
                        No Results
                    </div>

                </div>
            </div>
        </div>
    </form>
</div>
<!-- Right accrodion start -->
<div class="rightAccordion" *ngIf="showAddedSection">
    <h4 class="mb-0">Added Parts</h4>
    <div class="row" *ngIf="existingPartList?.length<1">
        <div class="col-md-12">No part found</div>
    </div>
    <!-- Clickable area start -->
    <div class="right-container">
    <div class="row" *ngFor="let partData of existingPartList;let i = index">
        <div class="col-md-12">
            <div class="d-flex rightAaccordionTitle justify-content-between mt-3">
                <div>{{ i + 1 }}.&nbsp;{{partData.partName}}&nbsp;{{partData.partNumber}}</div>
                <div><i class="fa fa-chevron-down cursor-pointer"
                        (click)="opendedSection='partDetailSectionOpened' + partData.partId"></i></div>
            </div>
            <div class="rightAccContnt"
                *ngIf="opendedSection==='partDetailSectionOpened' + partData.partId">
                <div class="row pt-1 pb-2" *ngIf="getFileShortName(partData.rfqPartFile).length>0">
                    <div class="col-md-12 partContainer">
                        <div class="d-flex rightFileTitle justify-content-between">
                            <div>{{getFileShortName(partData.rfqPartFile)}} 
                                </div>
                                <span class="pull-right cursor-pointer"
                                (click)="downloadAllFilesForPart(partData.rfqPartFile,partData.partsFiles)">
                                Download All
                            </span>
                        </div>
                    </div>

                </div>

                <div class="row pt-1 pb-2" *ngFor="let partsFile of partData.partsFiles">
                    <div class="col-md-12" *ngIf="getFileShortName(partsFile).length>0">
                        <div class="d-flex rightFileTitle justify-content-between">
                            <div>{{getFileShortName(partsFile)}}</div>
                            <div class="fw-bold text-dark fx-3 {{disableEditCloneDelete?'':'cursor-pointer'}}" (click)="removeFile(partData,partsFile)">
                                X</div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 fw-bold">Manufacturing Process</div>
                    <div class="col-md-6">
                        {{
                            partData?.parentCategoryName &&
                            partData?.parentCategoryName !== "do not delete"
                              ? (partData?.parentCategoryName | titlecase)
                              : "N/A"
                          }}</div>
                </div>
                <div class="row">
                    <div class="col-md-6 fw-bold">Technique</div>
                    <div class="col-md-6">
                        {{
                            partData?.childCategoryName &&
                            partData?.childCategoryName !== "do not delete"
                              ? (partData?.childCategoryName | titlecase)
                              : "N/A"
                          }}</div>
                </div>
                <div class="row">
                    <div class="col-md-6 fw-bold">Material</div>
                    <div class="col-md-6">
                        {{
                            partData?.materialName == "defaultroot" ||
                            partData?.materialName == ""
                              ? "N/A"
                              : (partData?.materialName | titlecase)
                          }}</div>
                </div>
                <div class="row">
                    <div class="col-md-6 fw-bold">Post Processing</div>
                    <div class="col-md-6">
                        {{
                            partData?.postProductionProcessName
                              ? (partData?.postProductionProcessName
                                | titlecase)
                              : "N/A"
                          }}
                        </div>
                </div>
                <div class="row">
                    <div class="col-md-6 fw-bold">Quantity</div>
                    <div class="col-md-6">
                        <span *ngFor="let quantityObj of partData.rfqPartQuantityList">
                            {{quantityObj.partQty}}&nbsp;</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 fw-bold">Quantity Unit</div>
                    <div class="col-md-6">{{getQuantityUnitById(partData.partQtyUnitId)}}</div>
                </div>


                <div class="row">
                    <div class="col-md-12 pt-3">
                        <div class="d-flex justify-content-between">
                            <div class="{{disableEditCloneDelete?'text-muted':'text-primary cursor-pointer'}}" (click)="editPart(partData)">Edit</div>
                            <div class="{{disableEditCloneDelete?'text-muted':'text-primary cursor-pointer'}}" (click)="clonePart(partData)">Clone</div>
                            <div class="{{disableEditCloneDelete?'text-muted':'text-primary cursor-pointer'}}" (click)="deletePart(partData)">Delete</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <!-- Clickable area end -->
    <!-- accordion content start -->
    <!-- accordion content end -->

</div>
<!-- Right accrodion end -->
<ng-template #statusModel let-d="dismiss" data-backdrop="static" data-keyboard="false">
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">
            {{popupDataModel.isClone?"Clone Part ":null}}
            {{popupDataModel.isDelete?"Delete Part ":null}}
            {{popupDataModel.isDeletePartAttachment?"Delete File(s) ":null}}
        </h4>
        <div class="fw-bold">{{popupDataModel.partDataToCloneDelete.partName}}</div>
    </div>
    <div class="modal-body border-bottom">
        <div class="m-b-20">
            <div class="h5 fw-bold text-center pt-4" *ngIf="popupDataModel.isClone">
                Are you sure you want to clone this part?
            </div>
            <div class="h5 fw-bold text-center pt-4" *ngIf="popupDataModel.isDeletePartAttachment">
                Are you sure you want to delete this part file?
            </div>
            <div class="fs-3 text-center" *ngIf="popupDataModel.isDelete">
                Are you sure you want to delete this part? This will remove it from the RFQ. </div>
        </div>
    </div>
    <div class="modal-footer d-block">
        <div class="row">
            <div class="col-md-6">
                <button type="button" class="btn btn-outline-primary w-100" (click)="acceptOrReject(false)"
                    style="width: 45%">
                    NO
                </button>
            </div>
            <div class="col-md-6">
                <button type="button" class="btn btn-primary w-100" (click)="acceptOrReject(true)" style="width: 45%">
                    Yes
                </button>
            </div>
        </div>
    </div>
</ng-template>