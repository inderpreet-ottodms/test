<div>
    <form [formGroup]="shippingFormData">
        <div class="row">
            <div class="col-md-6" *ngFor="let address of   existingAddressList">
                <div class="shippingAddrsses">
                    <div class="d-flex">
                        <div>
                            <input type="radio" [value]="address.siteId" type="radio" formControlName="shipTo"
                                name="shipTo" />
                        </div>
                        <div class="px-2">
                            <div class="d-flex flex-column">
                                <div>{{address.siteLabel}} </div>
                                <div>{{address.streetAddress}} {{address.deptAddress}}</div>
                                <div>{{address.country}} {{address.state}} {{address.postalCode}}</div>
                            </div>
                        </div>
                        <div class="ml-auto">
                            <div class="d-flex flex-column align-items-end">
                                <div class="text-primary cursor-pointer" (click)="editAddress(address)">Edit</div>
                                <div class="text-danger cursor-pointer" (click)="deletAaddress(address)">Delete</div>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-end makeDefault">
                        <label class="mb-0 pr-2">Make Default</label>
                        <input name="defaultSite" [checked]="address.defaultSite?'checked':null"
                            (change)="changeDefaultAddress(address)" type="checkbox">
                    </div>
                </div>
            </div>
        </div>
        <div class="row" *ngIf="existingAddressList.length<1">
            <div class="col-md-6">
                <div class="shippingformField">
                    <label class="form-label">Shipping Address<sup style="color: red;">*</sup></label>
                    <span>No address on file.</span>
                    <inline-error-display [displayError]="showShipToNotSelectedError"
                        errorMsg="Shipping detail is required"></inline-error-display>
                </div>
            </div>
        </div>
        <div class="row pb-2 shippingformField" *ngIf="existingAddressList.length<5">
            <div class="col-md-6">
                <button type="button" class="btn btn-primary w-100 mt-2 addBtn" (click)="addNewAddress()">
                    <b class="h5">Add Address</b></button>
            </div>
        </div>
        <div class="row pb-2 shippingformField">
            <div class="col-md-12 pt-3"><label class="fw-bold h6">Responsible for shipping cost?</label></div>
            <div class="col-md-6">
                <button type="button" (click)="setWhoPaysForShipping(BUYER_PAYS_FOR_SHIPPING)"
                    class="manufacturingLocation btn-sm w-100 {{  shippingFormData.value.whoPaysForShipping===BUYER_PAYS_FOR_SHIPPING?'locationSelected':null}}">Buyer</button>
            </div>
            <div class="col-md-6">
                <button type="button" (click)="setWhoPaysForShipping(MANNUFACTURER_PAYS_FOR_SHIPPING)"
                    class="manufacturingLocation {{  shippingFormData.value.whoPaysForShipping===MANNUFACTURER_PAYS_FOR_SHIPPING?'locationSelected':null}} btn-sm w-100">Manufacturer</button>
            </div>
        </div>
    </form>
</div>



<!--/////////////////////////add edit in popup started-->

<ng-template #addEditModel let-d="dismiss" data-backdrop="static" data-keyboard="false">
    <div class="modal-header justify-content-between">
        <h4 class="modal-title" id="modal-basic-title-change-address">{{shippingForm.value.addressId>0?'Edit ':'Add New
            '}}Address</h4>
        <span (click)="closeAddEditPopup()" class="cursor-pointer">X</span>
    </div>
    <div class="modal-body py-0">
        <div class="pt-3">
            <form [formGroup]="shippingForm">
                <div class="row">
                    <div class="col-md-12">
                        <div class="shippingformField">
                            <label for="rfqShippingContactName" class="form-label">Nickname<sup style="color: red"> *</sup></label>
                            <input type="text" autocompleteOff class="form-control" id="rfqShippingContactName"
                                aria-describedby="rfqShippingContactNameHelp" maxlength="50" formControlName="siteLabel"
                                placeholder="Nickname">
                            <inline-error-display [displayError]="isShippingFieldValid('siteLabel')"
                                errorMsg="Nickname is required"></inline-error-display>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="shippingformField">
                            <label for="rfqShippingAddress1" class="form-label">Address 1<sup style="color: red"> *</sup></label>
                            <input type="text" autocompleteOff class="form-control" id="rfqShippingAddress1"
                                aria-describedby="rfqShippingAddress1Help" maxlength="100" name="streetAdd"
                                id="streetAdd" formControlName="streetAddress" placeholder="Address Line 1">
                            <inline-error-display [displayError]="isShippingFieldValid('streetAddress')"
                                errorMsg="Address 1 Is required"></inline-error-display>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="shippingformField">
                            <label for="rfqShippingAddress2" class="form-label">Address 2</label>
                            <input type="text" autocompleteOff class="form-control" id="rfqShippingAddress2"
                                aria-describedby="rfqShippingAddress2Help" maxlength="100" formControlName="deptAddress"
                                placeholder="Address line 2">
                            <inline-error-display [displayError]="isShippingFieldValid('deptAddress')"
                                errorMsg="Address 2 Is required"></inline-error-display>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="shippingformField">
                            <label for="rfqShippingCountry" class="form-label">Country</label>
                            <select id="rfqShippingCountry" (change)="updateStateDropdown($event.target.value)"
                                class="form-control" formControlName="countryId">
                                <option [value]="0" selected>
                                    Select Country
                                </option>
                                <option *ngFor="let country of   countryList" [value]="country.countryId">
                                    {{ country.countryName }}
                                </option>
                            </select>
                            <inline-error-display [displayError]="isShippingFieldValid('countryId')"
                                errorMsg="Country Is required"></inline-error-display>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="shippingformField">
                            <label for="rfqShippingState" class="form-label">State</label>
                            <select id="rfqShippingState" class="form-control" formControlName="stateId">
                                <option [value]="0" selected>
                                    Select State
                                </option>
                                <option *ngFor="let state of   stateList" [value]="state.regionId">
                                    {{ state.regionName }}
                                </option>
                            </select>
                            <inline-error-display [displayError]="isShippingFieldValid('stateId')"
                                errorMsg="State Is required"></inline-error-display>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="shippingformField">
                            <label for="rfqShippingCity" class="form-label">City<sup style="color: red"> *</sup></label>
                            <input type="text" autocompleteOff class="form-control" id="rfqShippingCity"
                                aria-describedby="rfqShippingCityHelp" maxlength="20" formControlName="city"
                                placeholder="City">
                            <inline-error-display [displayError]="isShippingFieldValid('city')"
                                errorMsg="City Is required"></inline-error-display>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="shippingformField">
                            <label for="rfqShippingZipCode" class="form-label">Zip Code<sup style="color: red"> *</sup></label>
                            <input type="text" autocompleteOff class="form-control" id="rfqShippingZipCode"
                                aria-describedby="rfqShippingZipCodeHelp" maxlength="8" formControlName="postalCode"
                                placeholder="Postal Code" name="PostalCode" id="PostalCode">
                            <inline-error-display [displayError]="isShippingFieldValid('postalCode')"
                                errorMsg="Zip Code Is required"></inline-error-display>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="modal-footer d-block">
        <div class="row no-gutters">
            <div class="col-md-6 pr-1">
                <button type="button" class="btn btn-outline-primary w-100" (click)="closeAddEditPopup()">
                    Cancel
                </button>
            </div>
            <div class="col-md-6 pl-1">
                <button type="button" class="btn btn-primary w-100" (click)="saveUpdateContinueToListing()">
                    {{shippingForm.value.addressId>0?'Update':'Save'}}
                </button>
            </div>
        </div>
    </div>
</ng-template>
<!--/////////////////////////add edit in popup ends-->

<!--/////////////////////////confirmation Model started-->
<ng-template #confirmationModel let-d="dismiss" data-backdrop="static" data-keyboard="false">
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">
            Delete Address
        </h4>
    </div>
    <div class="modal-body border-bottom">
        <div class="m-b-20">
            <div class="fs-3 text-center">
                Are you sure you want to delete this address?
            </div>
        </div>
    </div>
    <div class="modal-footer d-block">
        <div class="row">
            <div class="col-md-6">
                <button type="button" class="btn btn-outline-primary w-100" (click)="acceptOrReject(false)"
                    style="width: 45%">
                    NO
                </button>
            </div>
            <div class="col-md-6">
                <button type="button" class="btn btn-primary w-100" (click)="acceptOrReject(true)" style="width: 45%">
                    Yes
                </button>
            </div>
        </div>
    </div>
</ng-template>